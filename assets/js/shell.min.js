"use strict";window.shell=function(){let t=document.getElementById("shell");return t.promptPrefix=">>> ",t.blockPrefix="... ",t.init=async function(){t.value="Python "+Basthon.pythonVersion+"\n",t.value+='Type "help", "copyright", "credits" or "license" for more information.\n',t.value+=t.promptPrefix,t.history=[],t.historyPosition=0,t.focus(),t.cursorToEnd()},t.pushToHistory=function(r){r.split("\n").forEach(function(r){if(r.length>0){r!==t.history[t.history.length-1]&&t.history.push(r)}}),t.historyPosition=t.history.length},t.lineHiddenByHistory="",t.lastLine=function(){const r=t.value;return r.slice(r.lastIndexOf("\n")+t.promptPrefix.length+1)},t.displayCurrentHistory=function(){let r;r=t.historyPosition>=t.history.length?t.lineHiddenByHistory:t.history[t.historyPosition];const e=t.value;t.value=e.slice(0,e.lastIndexOf("\n")+t.promptPrefix.length+1)+r,t.cursorToEnd()},t.backwardHistory=function(){t.historyPosition===t.history.length&&(t.lineHiddenByHistory=t.lastLine()),t.historyPosition=Math.max(0,t.historyPosition-1),t.displayCurrentHistory()},t.forwardHistory=function(){t.historyPosition<t.history.length&&t.historyPosition++,t.displayCurrentHistory()},t.newline=function(){t.value+=t.promptPrefix,t.cursorToEnd()},t.append=function(r){t.value+=r,t.cursorToEnd()},t.cursorToEnd=function(){t.cursorGoTo(t.value.length),t.scrollTop=t.scrollHeight},t.cursorPos=function(){return t.selectionStart},t.cursorGoTo=function(r){t.setSelectionRange(r,r)},t.cursorOnLastLine=function(){return t.value.lastIndexOf("\n")<t.cursorPos()},t.cursorAfterLastPrompt=function(){return t.cursorOnLastLine()&&t.cursorColumn()>=t.promptPrefix.length},t.cursorJustAfterLastPrompt=function(){return t.cursorOnLastLine()&&t.cursorColumn()===t.promptPrefix.length},t.cursorRightAfterLastPrompt=function(){return t.cursorOnLastLine()&&t.cursorColumn()>t.promptPrefix.length},t.cursorColumn=function(){const r=t.cursorPos();return r-t.value.slice(0,r).split("\n").slice(0,-1).join("\n").length-1},t.launch=function(r,e=!0){t.pushToHistory(r),Basthon.dispatchEvent("eval.request",{code:r,interactive:e})},t.keypress=function(r){if(t.cursorAfterLastPrompt())switch(r.keyCode){case 13:if(r.shiftKey)t.append("\n"+t.blockPrefix);else{let r=t.value;const e=r.lastIndexOf(t.promptPrefix);r=(r=r.substr(e+t.promptPrefix.length)).split("\n... ").join("\n"),t.append("\n"),t.launch(r,!0)}t.cursorToEnd(),r.preventDefault()}else r.preventDefault()},t.keydown=function(r){switch(r.keyCode){case 9:t.append("    "),r.preventDefault();break;case 37:t.cursorJustAfterLastPrompt()&&(r.preventDefault(),r.stopPropagation());break;case 36:t.cursorAfterLastPrompt()&&(t.cursorGoTo(t.cursorPos()-t.cursorColumn()+t.promptPrefix.length),r.preventDefault(),r.stopPropagation());break;case 38:t.cursorAfterLastPrompt()&&(t.backwardHistory(),r.preventDefault());break;case 40:t.cursorAfterLastPrompt()&&(t.forwardHistory(),r.preventDefault());break;case 8:t.cursorRightAfterLastPrompt()||t.cursorJustAfterLastPrompt()&&t.selectionStart<t.selectionEnd||(r.preventDefault(),r.stopPropagation());break;case 65:if(!r.ctrlKey)break;let e=t.value,o=t.cursorPos()-t.cursorColumn()+t.promptPrefix.length;t.setSelectionRange(o,e.length),r.preventDefault();break;case 33:case 34:r.preventDefault()}},t.addEventListener("keypress",t.keypress),t.addEventListener("keydown",t.keydown),t}();
//# sourceMappingURL=shell.min.js.map