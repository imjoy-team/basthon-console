"use strict";window.editor=function(){let e=window.ace.edit("editor");return e.loadScript=async function(){const t=new URL(window.location.href);if(t.searchParams.has("script")){let n=t.searchParams.get("script");try{n=pako.inflate(Base64.toUint8Array(n),{to:"string"})}catch{n=decodeURIComponent(n)}e.setContent(n)}else if(t.searchParams.has("from")){let n,o=t.searchParams.get("from");o=decodeURIComponent(o);try{n=await Basthon.xhr({url:o,method:"GET"})}catch{throw{message:"Le chargement du script "+o+" a échoué.",name:"LoadingException"}}n&&e.setContent(n)}else"undefined"!=typeof localStorage&&"py_src"in localStorage?e.setContent(localStorage.py_src):e.setContent("for i in range(10):\n\tprint(i)");e.scrollToRow(0),e.gotoLine(0)},e.init=async function(){e.session.setMode("ace/mode/python"),e.focus(),e.setOptions({enableLiveAutocompletion:!0,highlightActiveLine:!1,highlightSelectedWord:!0,fontSize:"12pt"}),await e.loadScript()},e.download=function(t="script.py"){let n=e.getValue();n=n.replace(/\r\n|\r|\n/g,"\r\n");let o=new Blob([n],{type:"text/plain"}),a=document.createElement("a");a.download=t,a.href=window.URL.createObjectURL(o),a.target="_blank",a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)},e.setContent=function(t){e.setValue(t),e.scrollToRow(0),e.gotoLine(0)},e.open=function(t){return new Promise(function(n,o){const a=new FileReader;a.readAsText(t),a.onload=function(t){e.setContent(t.target.result),n()},a.onerror=o})},e.sharingURL=function(){const t=e.getValue().replace(/\r\n|\r|\n/g,"\r\n"),n=new URL(window.location.href);let o;n.hash="",n.searchParams.delete("from");try{o=Base64.fromUint8Array(pako.deflate(t),!0)}catch{o=encodeURIComponent(t).replace(/\(/g,"%28").replace(/\)/g,"%29")}return n.searchParams.set("script",o),n.href},e.backup=async function(){"undefined"!=typeof localStorage&&(localStorage.py_src=e.getValue())},e}();
//# sourceMappingURL=editor.min.js.map